<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="../list.css">
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <title>University</title>
  </head>
  <body>
    <header class="header">
      <h1>Dashboard</h1>
    </header>
    <main class="content">
      <section class="content__primary">
        <section class="content__students">
          <header class="content__header">
            <h2>Students</h2>
            <i class="bx bx-dots-horizontal-rounded bx-md"></i>
          </header>
          <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>View Application</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody id="studentTableBody">
            </tbody>
        </table>
        </section>
      </section>

      <aside class="content__secondary">
        <section class="content__funds">
          <header class="content__header">
            <h2>Funds</h2>
          </header>
          <section class="funds">
            <section>
              <p>Balance</p>
              <p class="funds__balance">R756 000.00</p>
            </section>

            <section class="funds_usage">
              <section class="funds__used">
                <p>Total Used</p>
                <p class="used">R44 000.00</p>
              </section>
              <section class="funds__used">
                <p>Students</p>
                <p class="funded">3</p>
              </section>
            </section>
          </section>
        </section>
        <section class="content__hods">
          <header class="content__header">
            <h2>HODs</h2>
            <i class="bx bx-dots-horizontal-rounded bx-md"></i>
          </header>
          <ul class="hods">
            <li class="hod">
              <h3 class="student__name">Ndzalama Mabasa</h3>
              <p class="department">Department</p>
              <p class="email">
                <a href="mailto:ndzalama.mabasa@univen.ac.za"
                  >ndzalama.mabasa@univen.ac.za</a
                >
              </p>
            </li>

            <li class="hod">
              <h3 class="student__name">Ndzalama Mabasa</h3>
              <p class="department">Department</p>
              <p class="email">
                <a href="mailto:ndzalama.mabasa@univen.ac.za"
                  >ndzalama.mabasa@univen.ac.za</a
                >
              </p>
            </li>

            <li class="hod">
              <h3 class="student__name">Ndzalama Mabasa</h3>
              <p class="department">Department</p>
              <p class="email">
                <a href="mailto:ndzalama.mabasa@univen.ac.za"
                  >ndzalama.mabasa@univen.ac.za</a
                >
              </p>
            </li>

            <li class="hod">
              <h3 class="student__name">Ndzalama Mabasa</h3>
              <p class="department">Department</p>
              <p class="email">
                <a href="mailto:ndzalama.mabasa@univen.ac.za"
                  >ndzalama.mabasa@univen.ac.za</a
                >
              </p>
            </li>

            <li class="hod">
              <h3 class="student__name">Ndzalama Mabasa</h3>
              <p class="department">Department</p>
              <p class="email">
                <a href="mailto:ndzalama.mabasa@univen.ac.za"
                  >ndzalama.mabasa@univen.ac.za</a
                >
              </p>
            </li>
          </ul>
        </section>
      </aside>
    </main>

    <script>
      fetch('http://localhost:5263/api/UniversityAdmin/GetAllFundRequests')
          .then(response => response.json())
          .then(data => {
              const studentTableBody = document.getElementById('studentTableBody');

              
              data.forEach(student => {
                 
                  const row = document.createElement('tr');

                  
                  const studentname = document.createElement('td');
                  studentname.textContent = student.firstName +' ' + student.lastName;
                  row.appendChild(studentname);

                  const viewApplicationCell = document.createElement('td');
                  const viewApplicationLink = document.createElement('a');
                  viewApplicationLink.href = `viewApplication.html?studentID=${student.studentID}`;
                  viewApplicationLink.textContent = 'View Application';
                  viewApplicationCell.appendChild(viewApplicationLink);
                  row.appendChild(viewApplicationCell);

                  const statusCell = document.createElement('td');
                  statusCell.textContent = student.status;
                  row.appendChild(statusCell);

                  // Append the row to the table body
                  studentTableBody.appendChild(row);
              });
          })
          .catch(error => {
              console.error('Error fetching application details:', error);
          });
  </script>
  </body>
</html>
